<div class="container">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <h1>{{ title }}</h1>
      <p class="subtitle">Organiza tu día hora por hora</p>
    </div>
   <div class="date-display">
  {{ getCurrentDate() }}
</div>
  </header>

  <!-- Estadísticas Rápidas -->
  <div class="stats-container">
    <div class="stat-card">
      <span class="stat-number">{{ agendaItems.length }}</span>
      <span class="stat-label">Total Actividades</span>
    </div>
    <div class="stat-card pending">
      <span class="stat-number">{{ tareasPendientes }}</span>
      <span class="stat-label">Pendientes</span>
    </div>
    <div class="stat-card completed">
      <span class="stat-number">{{ tareasCompletadas }}</span>
      <span class="stat-label">Completadas</span>
    </div>
    <div class="stat-card next" *ngIf="proximaTarea">
      <span class="stat-time">{{ proximaTarea.hora }}</span>
      <span class="stat-label">Próxima</span>
    </div>
  </div>

  <!-- Próxima Actividad -->
  <div class="next-activity" *ngIf="proximaTarea">
    <div class="next-badge">👉 Próxima actividad</div>
    <div class="next-card">
      <span class="next-time">{{ proximaTarea.hora }}</span>
      <div class="next-info">
        <strong>{{ proximaTarea.titulo }}</strong>
        <span class="next-category" [style.background-color]="getColorCategoria(proximaTarea.categoria)">
          {{ proximaTarea.categoria }}
        </span>
      </div>
    </div>
  </div>

  <!-- Filtros -->
  <div class="filters-section">
    <div class="filter-group">
      <span class="filter-label">Filtrar por categoría:</span>
      <div class="category-filters">
        <button 
          class="category-btn" 
          [class.active]="filtroCategoria === 'todas'"
          (click)="filtroCategoria = 'todas'"
        >
          Todas
        </button>
        <button 
          *ngFor="let cat of categorias" 
          class="category-btn"
          [class.active]="filtroCategoria === cat"
          [style.background-color]="getColorCategoria(cat)"
          (click)="filtroCategoria = cat"
        >
          {{ cat | titlecase }}
        </button>
      </div>
    </div>
  </div>

  <!-- Formulario para Nueva Actividad -->
  <div class="add-section">
    <div class="form-card">
      <h3>➕ Nueva Actividad</h3>
      <div class="form-grid">
        <div class="form-group">
          <label>Hora:</label>
          <input 
            type="time" 
            [(ngModel)]="nuevoItem.hora" 
            class="time-input"
          >
        </div>
        <div class="form-group">
          <label>Título:</label>
          <input 
            type="text" 
            [(ngModel)]="nuevoItem.titulo" 
            placeholder="¿Qué vas a hacer?"
            class="title-input"
          >
        </div>
        <div class="form-group">
          <label>Categoría:</label>
          <select [(ngModel)]="nuevoItem.categoria" class="category-select">
            <option *ngFor="let cat of categorias" [value]="cat">
              {{ cat | titlecase }}
            </option>
          </select>
        </div>
        <div class="form-group">
          <label>Prioridad:</label>
          <select [(ngModel)]="nuevoItem.prioridad" class="priority-select">
            <option value="alta">Alta 🔥</option>
            <option value="media">Media ⚡</option>
            <option value="baja">Baja 💧</option>
          </select>
        </div>
        <div class="form-group full-width">
          <label>Descripción/Notas:</label>
          <textarea 
            [(ngModel)]="nuevoItem.descripcion" 
            placeholder="Detalles adicionales..."
            class="description-textarea"
            rows="3"
          ></textarea>
        </div>
      </div>
      <button (click)="agregarItem()" class="add-btn">
        <span class="btn-icon">📅</span>
        Agregar a la Agenda
      </button>
    </div>
  </div>

  <!-- Lista de Itinerario -->
  <div class="timeline">
    <h3 class="timeline-title">📋 Itinerario del Día</h3>
    
    <div class="timeline-items">
      <div 
        *ngFor="let item of itemsFiltrados" 
        class="timeline-item"
        [class.completed]="item.completado"
        [class.high-priority]="item.prioridad === 'alta'"
      >
        <div class="time-section">
          <span class="time-display">{{ item.hora }}</span>
          <div class="priority-badge" [style.background-color]="getColorPrioridad(item.prioridad)">
            {{ getIconoPrioridad(item.prioridad) }}
          </div>
        </div>
        
        <div class="content-section">
          <div class="item-header">
            <div class="checkbox-container">
              <input 
                type="checkbox" 
                [checked]="item.completado"
                (change)="toggleCompletado(item.id)"
                class="checkbox"
                [id]="'item-' + item.id"
              >
              <label [for]="'item-' + item.id" class="custom-checkbox"></label>
            </div>
            <h4 class="item-title">{{ item.titulo }}</h4>
            <button 
              (click)="eliminarItem(item.id)" 
              class="delete-btn"
              title="Eliminar actividad"
            >
              🗑️
            </button>
          </div>
          
          <div class="item-meta">
            <span 
              class="category-tag"
              [style.background-color]="getColorCategoria(item.categoria)"
            >
              {{ item.categoria | titlecase }}
            </span>
          </div>
          
          <p class="item-description" *ngIf="item.descripcion">
            {{ item.descripcion }}
          </p>
        </div>
      </div>
    </div>

    <!-- Estado vacío -->
    <div *ngIf="itemsFiltrados.length === 0" class="empty-state">
      <div class="empty-icon">📭</div>
      <h3>No hay actividades programadas</h3>
      <p>¡Agrega tu primera actividad para comenzar!</p>
    </div>
  </div>

  <!-- Resumen del Día -->
  <div class="daily-summary" *ngIf="agendaItems.length > 0">
    <h4>📊 Resumen del Día</h4>
    <div class="progress-container">
      <div class="progress-bar">
        <div 
          class="progress-fill" 
          [style.width]="(tareasCompletadas / agendaItems.length) * 100 + '%'"
        ></div>
      </div>
      <span class="progress-text">
        {{ ((tareasCompletadas / agendaItems.length) * 100).toFixed(0) }}% del día completado
      </span>
    </div>
  </div>
</div>